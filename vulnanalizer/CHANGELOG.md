# Changelog

Все значимые изменения в проекте VulnAnalizer документируются в этом файле.

## [0.3.0001] - 2025-01-27

### Добавлено
- **Загрузка базы CVE**: Полная поддержка загрузки и парсинга CVE данных из NVD
  - Загрузка JSON файлов CVE (поддерживаются архивы .gz)
  - Автоматическое скачивание с NVD за период с 2010 года
  - Парсинг CVSS v2 и v3 оценок
  - Извлечение описаний уязвимостей
  - Хранение exploitability и impact scores
  - Кнопка получения ссылок для offline загрузки

- **Новая таблица CVE**: Создана таблица для хранения CVE данных
  - Поля для CVSS v2 и v3 оценок
  - Поля для exploitability и impact scores
  - Даты публикации и модификации
  - Индексы для оптимизации поиска

- **Улучшенная интеграция с хостами**:
  - Автоматическое обновление CVSS оценок при импорте хостов
  - Приоритет CVSS: CVE база > EPSS > исходный CVSS хоста
  - Отображение источника CVSS оценки (CVSS v3, CVSS v2, EPSS, Host)
  - Пометка для CVSS v2 оценок

- **Сортировка по уровню риска**: Добавлена возможность сортировки хостов
  - По риску (убывание/возрастание)
  - По CVSS (убывание/возрастание)
  - По EPSS (убывание/возрастание)
  - По количеству эксплойтов (убывание/возрастание)

### Изменено
- **Обновлена таблица hosts**: Добавлено поле `cvss_source` для хранения источника CVSS оценки
- **Обновлен API поиска хостов**: Добавлен параметр `sort_by` для сортировки результатов
- **Обновлен интерфейс**: Добавлен блок загрузки CVE в разделе настроек
- **Обновлена логика расчета риска**: Теперь использует данные CVE для получения актуальных CVSS оценок

### Технические изменения
- Добавлен новый роут `/api/cve/*` для работы с CVE данными
- Добавлены методы в `database.py` для работы с CVE
- Обновлена модель `CVERecord` в `models.py`
- Добавлена JavaScript функциональность для CVE в `app.js`
- Обновлена схема базы данных в `01-init.sql`

### API Endpoints
#### Новые endpoints для CVE:
- `POST /api/cve/upload` - Загрузка CVE из файла
- `POST /api/cve/download` - Скачивание CVE с NVD
- `GET /api/cve/status` - Статус CVE данных
- `POST /api/cve/clear` - Очистка CVE данных
- `GET /api/cve/download-urls` - Ссылки для скачивания

#### Обновленные endpoints:
- `GET /api/hosts/search` - Добавлен параметр `sort_by` для сортировки

### Источники данных
- NVD CVE Feeds: https://nvd.nist.gov/feeds/json/cve/1.1/
- Поддерживаемые форматы: JSON, GZ (архив)

## [0.2.0008] - 2025-01-20

### Добавлено
- Поддержка загрузки EPSS данных
- Поддержка загрузки ExploitDB данных
- Система расчета рисков
- Интеграция с MaxPatrol VM

### Изменено
- Улучшена производительность импорта хостов
- Добавлена поддержка больших файлов
- Улучшен пользовательский интерфейс

## [0.2.0001] - 2025-01-10

### Добавлено
- Базовая функциональность анализа уязвимостей
- Система аутентификации
- Управление пользователями
- Импорт хостов из CSV

---

## Формат версионирования

Проект использует [Semantic Versioning](https://semver.org/lang/ru/):

- **MAJOR** - несовместимые изменения API
- **MINOR** - новая функциональность с обратной совместимостью
- **PATCH** - исправления ошибок с обратной совместимостью
