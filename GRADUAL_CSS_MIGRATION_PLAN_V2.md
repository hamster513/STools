# План постепенной миграции CSS - Версия 2

## Текущее состояние
- ✅ Приложение работает стабильно с `style.css`
- ✅ Новая модульная архитектура создана
- ❌ Прямая миграция вызывает проблемы

## Стратегия миграции

### Этап 1: Подготовка (Безопасный)
1. **Создать гибридный подход**
   - Оставить текущие `style.css` как основу
   - Добавить новые CSS переменные в начало файлов
   - Постепенно заменять старые значения на переменные

2. **Создать CSS-валидатор**
   - Скрипт для проверки совместимости
   - Автоматическое создание compatibility.css

### Этап 2: Постепенная замена (По компонентам)
1. **Начать с кнопок** (самый простой компонент)
2. **Перейти к формам**
3. **Обновить таблицы**
4. **Закончить с layout**

### Этап 3: Финальная миграция
1. **Переключение на main.css**
2. **Удаление старых файлов**
3. **Оптимизация**

## Конкретные шаги

### Шаг 1: Добавить CSS переменные в существующие файлы
```css
/* В начало каждого style.css */
:root {
    --primary-color: #2563eb;
    --background-color: #ffffff;
    --text-primary: #1e293b;
    /* ... остальные переменные */
}
```

### Шаг 2: Создать миграционный скрипт
```bash
#!/bin/bash
# migrate_css_safe.sh
# Безопасная миграция CSS

# 1. Создать backup
# 2. Добавить переменные
# 3. Заменить цвета на переменные
# 4. Протестировать
# 5. Откатиться при проблемах
```

### Шаг 3: Поэтапное тестирование
- Каждый этап тестируется отдельно
- Автоматический rollback при ошибках
- Сохранение рабочего состояния

## Преимущества этого подхода
- ✅ Нет риска сломать приложение
- ✅ Можно откатиться на любом этапе
- ✅ Постепенное улучшение
- ✅ Сохранение функциональности

## Временные рамки
- Этап 1: 1-2 дня
- Этап 2: 3-5 дней
- Этап 3: 1 день

## Риски и митигация
- **Риск**: Стили могут сломаться
- **Митигация**: Автоматические backup'ы и rollback
- **Риск**: Производительность может ухудшиться
- **Митигация**: Поэтапное тестирование производительности
